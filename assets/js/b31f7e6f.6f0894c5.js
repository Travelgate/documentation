"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([["19809"],{83883:function(e,s,t){t.r(s),t.d(s,{frontMatter:()=>r,toc:()=>p,default:()=>d,metadata:()=>n,assets:()=>a,contentTitle:()=>i});var n=JSON.parse('{"id":"apis/for-sellers/connectors-pull-developers-api/develop-from-scratch/content/hotel-list","title":"HotelList","description":"Types of HotelList","source":"@site/docs/apis/for-sellers/connectors-pull-developers-api/develop-from-scratch/content/hotel-list.mdx","sourceDirName":"apis/for-sellers/connectors-pull-developers-api/develop-from-scratch/content","slug":"/apis/for-sellers/connectors-pull-developers-api/develop-from-scratch/content/hotel-list","permalink":"/docs/apis/for-sellers/connectors-pull-developers-api/develop-from-scratch/content/hotel-list","draft":false,"unlisted":false,"editUrl":"https://github.com/Travelgate/documentation/tree/main/docs/apis/for-sellers/connectors-pull-developers-api/develop-from-scratch/content/hotel-list.mdx","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"title":"HotelList","sidebar_position":9},"sidebar":"docsSidebar","previous":{"title":"Configuring Content","permalink":"/docs/apis/for-sellers/connectors-pull-developers-api/develop-from-scratch/content/configuring-content"},"next":{"title":"HotelDetails","permalink":"/docs/apis/for-sellers/connectors-pull-developers-api/develop-from-scratch/content/hotel-details"}}'),l=t(85893),o=t(50065);let r={title:"HotelList",sidebar_position:9},i=void 0,a={},p=[{value:"<strong>Types of HotelList</strong>",id:"types-of-hotellist",level:2},{value:"<strong>HotelListDelta</strong>",id:"hotellistdelta",level:3},{value:"<strong>Models</strong>",id:"models",level:2},{value:"<strong>Step 1: Define the Models of your response (Request and Response models)</strong>",id:"step-1-define-the-models-of-your-response-request-and-response-models",level:3},{value:"<strong>Develop</strong>",id:"develop",level:2},{value:"<strong>Step 1: Register the serializers and operations</strong>",id:"step-1-register-the-serializers-and-operations",level:3},{value:"<strong>Step 2: HotelListDeltaOperation validators</strong>",id:"step-2-hotellistdeltaoperation-validators",level:3},{value:"<strong>Step 3: Build the Seller&#39;s request</strong>",id:"step-3-build-the-sellers-request",level:3},{value:"<strong>Step 4: Parse the Seller&#39;s response</strong>",id:"step-4-parse-the-sellers-response",level:3},{value:"<strong>Code Review</strong>",id:"code-review",level:2},{value:"<strong>Step 1: Create Pull Request</strong>",id:"step-1-create-pull-request",level:3},{value:"<strong>Step 2: Wait for Travelgate review</strong>",id:"step-2-wait-for-travelgate-review",level:3}];function c(e){let s={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.a)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.h2,{id:"types-of-hotellist",children:(0,l.jsx)(s.strong,{children:"Types of HotelList"})}),"\n",(0,l.jsx)(s.p,{children:"There are different HotelList operations, each one for different cases and functionalities:"}),"\n",(0,l.jsx)(s.h3,{id:"hotellistdelta",children:(0,l.jsx)(s.strong,{children:"HotelListDelta"})}),"\n",(0,l.jsxs)(s.p,{children:["This operation is designed for the retrieval ",(0,l.jsx)(s.strong,{children:"HotelList"})," static data. This operation should be used when only the hotel code can be retrieve and then use the ",(0,l.jsx)(s.a,{href:"/docs/apis/for-sellers/connectors-pull-developers-api/develop-from-scratch/content/hotel-details",children:"HotelDetails Operation"}),"."]}),"\n",(0,l.jsx)(s.h2,{id:"models",children:(0,l.jsx)(s.strong,{children:"Models"})}),"\n",(0,l.jsx)(s.h3,{id:"step-1-define-the-models-of-your-response-request-and-response-models",children:(0,l.jsx)(s.strong,{children:"Step 1: Define the Models of your response (Request and Response models)"})}),"\n",(0,l.jsx)(s.p,{children:"These models are crucial because they specify the structure of the objects contained within supplier responses. They'll also play a vital role in serializing and deserializing requests and responses during development."}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"Template Structure Models HotelList",src:t(97848).Z+"",width:"290",height:"377"})}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"HotelLists"})," usually do not require any request models, as they are HTTP GET methods."]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Response example"}),":"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-csharp",children:"public class HotelListDeltaSupplierResponse\n{\n    public List<Hotels> Hotels { get; set; }\n}\n\npublic class Hotels\n{\n    public string Code { get; set; }\n}\n"})}),"\n",(0,l.jsx)(s.h2,{id:"develop",children:(0,l.jsx)(s.strong,{children:"Develop"})}),"\n",(0,l.jsx)(s.h3,{id:"step-1-register-the-serializers-and-operations",children:(0,l.jsx)(s.strong,{children:"Step 1: Register the serializers and operations"})}),"\n",(0,l.jsxs)(s.p,{children:["To specify which serializer and operations the developer will be using (based on the seller's API) we can specify it in our \"",(0,l.jsx)(s.strong,{children:"Extensions"}),'":']}),"\n",(0,l.jsxs)(s.p,{children:['File location: "',(0,l.jsx)(s.strong,{children:"HotelListDelta\\HotelListDeltaExtensions.cs"}),'"']}),"\n",(0,l.jsxs)(s.p,{children:["If the seller works with ",(0,l.jsx)(s.strong,{children:"JSON"})," format, we can specify the integration to work with ",(0,l.jsx)(s.strong,{children:"JSON"})," with the following:"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-csharp",children:"using System.Text.Json;\nusing Connectors.Content.Pull.Api.Extensions.HotelList;\nusing Connectors.Core.App.Extensions;\nusing ConnectorsTemplateContent.Common.Constants;\nusing ConnectorsTemplateContent.HotelsList.HotelListDelta.Models.Request;\nusing ConnectorsTemplateContent.HotelsList.HotelListDelta.Models.Response;\nusing HotelListDeltaOperation = ConnectorsTemplateContent.HotelsList.HotelListDelta.Operations.HotelListDeltaOperation;\n\nnamespace ConnectorsTemplateContent.HotelsList.HotelListDelta;\n\npublic static class HotelListDeltaExtensions\n{\n    public static void AddHotelListDeltaServices(this IServiceCollection services,\n        IConfiguration configuration)\n    {\n        services.AddJsonSerializer<HotelListDeltaRequest, HotelListDeltaSupplierResponse>(ConfigureJSONOptions);\n        services.AddHotelListDeltaOperation<HotelListDeltaOperation, HotelListDeltaRequest, HotelListDeltaSupplierResponse, AccessModel>(\n            TgxPlatform.Name, configuration);\n    }\n    private static void ConfigureJSONOptions(JsonSerializerOptions options) { }\n}\n"})}),"\n",(0,l.jsxs)(s.p,{children:["For details about others serializers, check ",(0,l.jsx)(s.a,{href:"../../advanced-use/content-extensions",children:"Extensions"}),"."]}),"\n",(0,l.jsx)(s.h3,{id:"step-2-hotellistdeltaoperation-validators",children:(0,l.jsx)(s.strong,{children:"Step 2: HotelListDeltaOperation validators"})}),"\n",(0,l.jsx)(s.p,{children:"There are two previous validations that serve as a filter so the buildrequest and the parseresponse are as safe as possible. They can be found in the SearchOperation.cs class:"}),"\n",(0,l.jsxs)(s.p,{children:['File location: "',(0,l.jsx)(s.strong,{children:"HotelListDelta\\Operations\\HotelListDeltaOperation.cs"}),'"']}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"TryValidateHotelList",src:t(13981).Z+"",width:"325",height:"305"})}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"TryValidateModelRequest"})}),"\n",(0,l.jsxs)(s.p,{children:["This step validates the incoming request from the client. While most validation is defined in the ",(0,l.jsx)(s.a,{href:"../../advanced-configuration/metadata-definition",children:"metadata"}),", this step is used for specific edge cases that cannot be generalized."]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-csharp",children:"public bool TryValidateModelRequest(ContentRequest connectorsRequest,\n    ContentOperationParameters<AccessModel> connectorParameters,\n    out IEnumerable<AdviseMessage> adviseMessages)\n{\n    adviseMessages = null;\n    return true;\n}\n"})}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"TryValidateSupplierResponses"})}),"\n",(0,l.jsx)(s.p,{children:"Once the supplier's response is received, this step validates it for errors or anomalies. Suppliers may return incomplete or erroneous data, so this step ensures only valid responses are processed further."}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Details"}),":"]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Check for supplier-specific error fields."}),"\n",(0,l.jsx)(s.li,{children:"Ensure required fields (e.g., hotel list) are present."}),"\n",(0,l.jsx)(s.li,{children:"Example Use Case: A supplier might return a response with an error code or an empty hotel list. This step would detect and handle such cases."}),"\n"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-csharp",children:"public bool TryValidateSupplierResponses(ContentOperationParameters<AccessModel> connectorParameters,\n    IEnumerable<SupplierResponseWrapper<HotelListDeltaSupplierResponse>> supplierResponses,\n    out IEnumerable<AdviseMessage> adviseMessages)\n    {\n    var supplierResponseWrappers = supplierResponses as SupplierResponseWrapper<HotelListDeltaSupplierResponse>[] ?? supplierResponses.ToArray();\n    \n    var success = ResponseValidator.TryValidateSupplierResponses(supplierResponseWrappers, out adviseMessages);\n\n    if (!success) return false;\n    \n    if (supplierResponseWrappers.ElementAt(0).Response.Hotels is null)\n    {\n        adviseMessages =\n        [\n            AdviseMessage.BuildSupplierNoResults() // Indicates no results from the supplier.\n        ];\n\n        return false;\n    }\n\n    return true; // Validation passes if no issues are found.\n}\n"})}),"\n",(0,l.jsx)(s.h3,{id:"step-3-build-the-sellers-request",children:(0,l.jsx)(s.strong,{children:"Step 3: Build the Seller's request"})}),"\n",(0,l.jsx)(s.p,{children:'This class will contain a "BuildRequests" method that will have the following args:'}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Object of the requests from the models previously created (HotelListDeltaRequest)."}),"\n",(0,l.jsx)(s.li,{children:"The request that the buyer sends (connectorsRequest)."}),"\n",(0,l.jsx)(s.li,{children:"Parameters (connectorParameters) which will have some helpers."}),"\n"]}),"\n",(0,l.jsxs)(s.p,{children:['File location: "',(0,l.jsx)(s.strong,{children:"HotelListDelta\\Operations\\HotelListDeltaOperation.BuildRequest.cs"}),'"']}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"Build Request HotelListDelta",src:t(86950).Z+"",width:"409",height:"359"})}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"Example of Build Request:"})}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-csharp",children:"using Connectors.Content.Pull.Application.Operations;\nusing Connectors.Core.Application.Connection;\nusing ConnectorsTemplateContent.HotelsList.HotelListDelta.Models.Request;\nnamespace ConnectorsTemplateContent.HotelsList.HotelListDelta.Operations;\n\ninternal partial class HotelListDeltaOperation\n{\n    public IEnumerable<SupplierRequestWrapper<HotelListDeltaRequest>> BuildRequests(\n       ContentRequest connectorsRequest,\n       ContentOperationParameters<AccessModel> connectorParameters)\n    {\n        string genericUrl = connectorParameters.ParametersModel.GenericUrl;\n\n        var request = new SupplierRequestWrapper<HotelListDeltaRequest>(\n            null,\n            new Uri(genericUrl),\n            HttpMethod.Get);\n\n        return new List<SupplierRequestWrapper<HotelListDeltaRequest>>()\n        {\n            request\n        };  \n    }\n}\n"})}),"\n",(0,l.jsx)(s.h3,{id:"step-4-parse-the-sellers-response",children:(0,l.jsx)(s.strong,{children:"Step 4: Parse the Seller's response"})}),"\n",(0,l.jsx)(s.p,{children:"Once the request has been sent, we will have to control and parse the response returned by the seller."}),"\n",(0,l.jsx)(s.p,{children:'We will be implementing the "ParseResponse" step inside HotelListDeltaOperation:'}),"\n",(0,l.jsxs)(s.p,{children:['File location: "',(0,l.jsx)(s.strong,{children:"HotelListDelta\\Operations\\HotelListDeltaOperation.ParseResponse.cs"}),'"']}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.img,{alt:"Build Buyer&#39;s Response",src:t(96110).Z+"",width:"409",height:"361"})}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.strong,{children:"Example of Parse Response:"})}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-csharp",children:"using Connectors.Content.Pull.Application.Operations;\nusing Connectors.Content.Pull.Application.Operations.HotelsList.HotelListDelta;\nusing Connectors.Content.Pull.Domain.Contracts.HotelList.Delta;\nusing Connectors.Core.Application.Connection;\nusing ConnectorsTemplateContent.HotelsList.HotelListDelta.Models.Response;\nusing Content.Common.Domain.AccumulativeContracts.Hotel;\n\nnamespace ConnectorsTemplateContent.HotelsList.HotelListDelta.Operations;\n\ninternal partial class HotelListDeltaOperation\n{\n    public HotelListDeltaResponse ParseResponses(ContentRequest connectorsRequest,\n        ContentOperationParameters<AccessModel> connectorParameters,\n        IEnumerable<SupplierResponseWrapper<HotelListDeltaSupplierResponse>> supplierResponses,\n        CancellationToken cancellationToken)\n    {\n        ParseSupplierHotels(supplierResponses.First().Response);\n        return new HotelListDeltaResponse(new HotelListDeltaRs());\n    }\n\n    private void ParseSupplierHotels(HotelListDeltaSupplierResponse response)\n    {\n        foreach (var hotel in response.Hotels)\n        {\n            //Accumulator is used instead of returning an object with the response.\n            _accumulator.AddValue(new AccumulativeHotelDelta()\n            {\n                Code = hotel.Code\n            });\n        }\n    }\n}\n"})}),"\n",(0,l.jsx)(s.h2,{id:"code-review",children:(0,l.jsx)(s.strong,{children:"Code Review"})}),"\n",(0,l.jsx)(s.h3,{id:"step-1-create-pull-request",children:(0,l.jsx)(s.strong,{children:"Step 1: Create Pull Request"})}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:['Commit your Search changes and push them to a new branch called "',(0,l.jsx)(s.strong,{children:"HotelListDeltaDevelopment"}),'" into the original repository.']}),"\n",(0,l.jsxs)(s.li,{children:["Separate the Pull Request into minimum these 4 commits:","\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Request and Response models"}),"\n",(0,l.jsx)(s.li,{children:"BuildRequest"}),"\n",(0,l.jsx)(s.li,{children:"ParseResponse"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"step-2-wait-for-travelgate-review",children:(0,l.jsx)(s.strong,{children:"Step 2: Wait for Travelgate review"})}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["This step involves waiting for the Travelgate team to review and approve the submitted pull request, for more details, check ",(0,l.jsx)(s.a,{href:"/docs/apis/for-sellers/connectors-pull-developers-api/develop-from-scratch/code-review/code-review-details",children:"Code Review Details"})]}),"\n"]})]})}function d(e={}){let{wrapper:s}={...(0,o.a)(),...e.components};return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},86950:function(e,s,t){t.d(s,{Z:()=>n});let n=t.p+"assets/images/HotelListBuildRequest-e1cbf4c52821c114cff1d43510e47ff5.png"},13981:function(e,s,t){t.d(s,{Z:()=>n});let n=t.p+"assets/images/HotelListOperation-21db8eaff0462002980a5f1519a744d1.png"},96110:function(e,s,t){t.d(s,{Z:()=>n});let n=t.p+"assets/images/HotelListParseResponse-5473d4211d5fc14eda9b63a888157636.png"},97848:function(e,s,t){t.d(s,{Z:()=>n});let n=t.p+"assets/images/TemplateStructureModelsHotelList-9aa264b8f4803ffe79cbdd2ee5ad3890.png"},50065:function(e,s,t){t.d(s,{Z:()=>i,a:()=>r});var n=t(67294);let l={},o=n.createContext(l);function r(e){let s=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),n.createElement(o.Provider,{value:s},e.children)}}}]);