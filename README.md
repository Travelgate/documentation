# Travelgate Documenation

This website is built using [Docusaurus 3](https://docusaurus.io/)

## Requirements
* Node.js version 18 or above

## Installation

```
$ npm install
```

### Generate GraphQL API reference

To run this command, you need to have a Travelgate api key called `TRAVELGATE_API_KEY`  in
your environment variables. You can get the key from the team. The way you set the environment
variable depends on your operating system.

```
npx docusaurus graphql-to-doc
```

or with a temporary environment variable:

```
TRAVELGATE_API_KEY=your_api_key npx docusaurus graphql-to-doc
```

The GraphQL API reference is generated from the TravelgateX GraphQL schema but
the `sidebar-schema.js` needs to be updated. Copy + paste the following code in your
`api/sidebar-schema.js` file: (***create the file manually if necessary**)

```javascript
/** @type {import('@docusaurus/plugin-content-docs').SidebarsConfig} */

module.exports = {
    schemaSidebar: [
        {
            type: "autogenerated",
            dirName: ".",
        },
    ],
};
```


## Local Development

```
$ npm run start
```

This command starts a local development server and opens up a browser window. Most changes are reflected live without having to restart the server.

### Build (optional)

```
$ npm run build
```

This command generates static content into the `build` directory and can be served using any static contents hosting service.

### Test `.mdx` structure before commit/push

```bash
npx docusaurus-mdx-checker
```

## Deployment

This repository is being automatically deployed to GitHub Pages using GitHub Actions.
The deployment script is located in `.github/workflows/main.yml`.

# Update / Upgrade

To update the Docusaurus version, its dependencies and the rest of the dependencies, run the following commands:

```bash
rm -rf node_modules
npm update --save
```

You can avoid removing the `node_modules` but it's recommended to do so to avoid any conflicts.

Before pushing the changes, make sure to test the website locally and check if everything is working as expected:

```bash
npm run build && npm run start
```

Be patient, the build process can take a while.

**IMPORTANT:** If you are upgrading `@graphql-markdown/docusaurus` version, make sure to run `graphql-to-doc` command
to check the generated API reference locally before pushing the changes. If your locally generated API reference
structure is different from the one in live, you need to inform the team about the changes in #documenters channel.

This step is important, because the generated links are also used to train Aina bot. If the links are
not working, Aina will not be able to provide the correct information.

```bash 
